# This file is a template, and might need editing before it works on your project.
# Full project: https://gitlab.com/pages/plain-html
stages:
  - test
  - badging
  - deploy

pages: 
    image: debian:bullseye
    stage: deploy
    script:
        - mkdir -p public
        - cp *.html public/
        - cp *.png public/
        - cp *.css public/
        - cp *.svg public
        - ls
    artifacts:
        paths:
            - public

htmlhint:
    stage: test
    tags:
        - shell
    script:
        - npx htmlhint *.html


lintcss:
    stage: test
    tags:
        - shell
    script:
        - npm install csslint-cli
        - npx csslint-cli *.css > css_report.txt
    artifacts:
        paths:
            - css_report.txt

bagdes:
    stage: badging
    tags:
        - shell
    dependencies:
        - lintcss
    script:
        - pip install anybadge
        - ~/.local/bin/anybadge --label=pipeline --value=passing --file=lint.svg passing=green failing=red
    artifacts:
        paths:
            - lint.svg
